## Домашнее задание к занятию "4.1. Командная оболочка Bash: Практические навыки"

### 1. Обязательная задача 1

    Есть скрипт:

    a=1
    b=2
    c=a+b
    d=$a+$b
    e=$(($a+$b))

    Какие значения переменным c,d,e будут присвоены? Почему?

ОТВЕТ:

"c" равно значению "a+b" - текстовой строке, потому, что фактически переменная "с" 
приняла значения введенные в строку после знака "=" как текст, а именно "склеила" 
символы (или это могли быть строки, как и цифры, но воспринимаемые как текстовый параметр) "a", "+", "b"   

"d" равно значению "1+2" - текстовой строке, потому, что в переменную "d" было занесено
текстовое (строкове) значение, присваемое ей, после знака "=", а именно, значение, хранимое в
переменной "а" равное символу "1", затем знак "+", как символьное значение и символ "2",
хранимый в переменной "b", как текст.

"e" равно значению 3 - числовому значению, так как сборка из двух скобок (( )) преобразует
значения переменных в цифру, т.е. значение переменной "a" в виде "1" преобразовано в число 1,
а значение перенной "b" в виде "2" в число 2.

P.S. Если внести в значения переменных a и b строковые параметры, текст, даже с цифрами, при использовании фигуры
$(($a+$b)) будет выдан результат "0" - ноль, так как не удастся преобразовать текстовые значения цифрв 
в их цифровой(численный) аналог.

### 2. Обязательная задача 2

    На нашем локальном сервере упал сервис и мы написали скрипт, который постоянно проверяет его доступность, записывая дату проверок до тех пор, пока сервис не станет доступным (после чего скрипт должен завершиться). В скрипте допущена ошибка, из-за которой выполнение не может завершиться, при этом место на Жёстком Диске постоянно уменьшается. Что необходимо сделать, чтобы его исправить:

    while ((1==1)
    do
	    curl https://localhost:4757
	    if (($? != 0))
	    then
		    date > curl.log
	    fi
    done

ОТВЕТ:   

    while ((1==1))   
    do  
        curl https://localhost:4757  
        if (($?!=0))  
        then  
            date >> curl.log
        else  
            exit 0  
        fi  
    done  

### 3. Обязательная задача 3

    Необходимо написать скрипт, который проверяет доступность трёх IP: 
    192.168.0.1, 173.194.222.113, 87.250.250.242 по 80 порту и записывает результат 
    в файл log. Проверять доступность необходимо пять раз для каждого узла.

ОТВЕТ1:  

    Скрипт Удален, как не состоявшийся, по требованию проверяющего. 
    Второй вариант (ОТВЕТ2) видимо не показывает то, что и требовалось получить... используя списки и циклы...

ОТВЕТ2:  

    #!/bin/env bash  
    #cip2.sh  

    array_url=("192.168.0.1:80" "173.194.222.113:80" "87.250.250.242:80")  
    for  (( i = 1; i <= 5 ; i++ ))  
    do  
        for (( t = 0; t < ${#array_url[@]}; t++ ))  
        do  
            curl ${array_url[$t]}  
            if (($?==0))  
            then 
                echo Узел ${array_url[$t]} - доступен! >> cip2.log  
            else 
                echo Узел ${array_url[$t]} - НЕ доступен! >> cip2.log  
            fi  
        done  
    done  

P.S. Можно так же сделать еще много комбинаций и вариаций смешав циклы while и for в разных компановках  

### 4.  Обязательная задача 4

    Необходимо дописать скрипт из предыдущего задания так, 
    чтобы он выполнялся до тех пор, пока один из узлов 
    не окажется недоступным. Если любой из узлов недоступен - 
    IP этого узла пишется в файл error, скрипт прерывается.

ОТВЕТ:

    #!/bin/env bash   
    #cip3.sh   

    array_url=("192.168.0.1:80" "173.194.222.113:80" "87.250.250.242:80")   
    while (( 1==1 ))   
    do   
        for (( t = 0; t < ${#array_url[@]}; t++ ))   
        do   
            curl ${array_url[$t]}   
            if (($?!=0))   
            then 
                echo Узел ${array_url[$t]} - НЕ доступен! > cip3_error.log && exit 0   
            else 
                echo Узел ${array_url[$t]} - доступен! > cip3.log   
            fi   
        done   
    done   

